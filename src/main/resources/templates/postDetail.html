<!DOCTYPE HTML>
<html lang="ko">
<head>
    <title>너의 의견은.</title>
    <link rel="shortcut icon" href="#">

    <!-- ajax , cookies 사용 lib -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
    <!-- ajax , cookies 사용 lib -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

    <!--    alert 창 import-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <link rel='stylesheet' href="/css/votestyle.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>

    <!--    Button css-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <!--    Button css-->

    <!----webfonts---->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!----//webfonts---->
    <!---start-click-drop-down-menu----->
    <script src="/js/single-page/jquery.min.js"></script>
    <!----//End-dropdown--->

    <style>
        body {
            font-family: 'Jua', sans-serif;
        }

        a.list-group-item {
            height: auto;
            min-height: 220px;
        }

        a.list-group-item.active small {
            color: #fff;
        }

        a.list-group-item .vs-title {
            font-size: 110px;
        }

        .fa {
            font-size: 100px;
            color: #ffffff;
        }

        .social a {
            text-decoration: none;
        }

        .twitter {
            background-color: #00acee;
            border-radius: 4px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .facebook-like {
            background-color: #3b5998;
            border-radius: 4px;
            margin-top: -3px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .media {
            padding: 10px;
        }
    </style>

</head>

<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
<div class="header">
    <button type="button" class="btn btn-secondary" onclick="location.href='/'" style="margin: 20px;">
        Back
    </button>
    <div class="wrap">
        <div class="clear"></div>
    </div>
</div>
<!---//End-header---->
<!---start-content---->
<div class="content" style="background: url('https://images3.alphacoders.com/764/764967.png');">
    <div class="wrap">
        <div class="single-page">
            <div class="single-page-artical">
                <div class="artical-content">


                    <div class="row form-group" style="padding-left:0px;">
                        <div class="col-md-12" style="width: 95%;text-align: left;">
                            <div>
                                <label class="text-black h4">작성자</label> :
                                <label id="userinfo" class="text-black h4"></label>
                            </div>
                            <div style="float:right;">
                                <label class="text-black h4">작성일자</label> :
                                <label class="text-black h4"
                                       th:text="${#temporals.format(post.modifiedAt, 'yyyy-MM-dd HH:mm:ss')}"></label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="container bootstrap snippets bootdey" style="width: 100%;">
                            <div class="row">
                                <div class="voteBack">
                                    <div class="well" style="background-color: unset; border:0px;">
                                        <h1 class="text-center">
                                            <b><span th:text="${post.title}" style="color: #ffffff;"></span></b>
                                        </h1>
                                        <br/>
                                        <p class="txt-center" th:text="${post.content}"></p>

                                        <div class="list-group">
                                            <a href="#" class="list-group-item"
                                               style="background: rgba(0,0,0,0); border:0px;">
                                                <div class="col-md-3">
                                                    <p id="opinionPercentA" class="txt-center"></p>
                                                    <div id="progressAdiv" class="progress">
                                                        <div id="progressA"
                                                             class="progress-bar progress-bar-striped progress-bar-animated bg-warning"
                                                             role="progressbar" style="width: 0%;" aria-valuenow="0"
                                                             aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="media col-md-12">
                                                        <button type="button"
                                                                class="btn btn-default btn-lg btn-block"><span
                                                                th:text="${post.opinionA}"></span></button>
                                                        <button type="button"
                                                                class="btn btn-default btn-lg btn-block">
                                                            <span>투표</span>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 text-center">
                                                    <h1 class="vs-title" style="color:white;">VS</h1>
                                                </div>
                                                <div class="col-md-3">
                                                    <p id="opinionPercentB" class="txt-center"></p>
                                                    <div id="progressBdiv" class="progress">
                                                        <div id="progressB"
                                                             class="progress-bar progress-bar-striped progress-bar-animated bg-info"
                                                             role="progressbar" style="width: 0%;" aria-valuenow="0"
                                                             aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="media col-md-12">
                                                        <button type="button"
                                                                class="btn btn-default btn-lg btn-block"><span
                                                                th:text="${post.opinionB}"></span></button>
                                                        <button type="button"
                                                                class="btn btn-default btn-lg btn-block">
                                                            <span>투표</span>
                                                        </button>

                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                    <div style="width: 57%;">
                                        <button type="button" class="btn btn-secondary" id="editBtn"
                                                style="margin-left: 20px;float: right; margin-bottom: 10px;">수정
                                        </button>
                                        <button type="button" class="btn btn-secondary" id="deleteBtn"
                                                style="margin-left: 20px;float: right; margin-bottom: 10px;">삭제
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="clear"></div>
                    </div>
                    <!---start-comments-section--->
                    <br/><br/><br/><br/><br/>

                    <div class="comment-section" style="padding:30px;">
                        <div class="grids_of_2">
                            <hr style="border-top: 1px solid #000;">
                            <h2>Comments</h2>
                            <div class="grids_of_2" id="comment">

                            </div>
                            <div class="artical-commentbox">
                                <h2>Leave a Comment</h2>
                                <div class="table-form">
                                    <form action="#" method="post" name="post_comment">
                                        <div>
                                            <label>Name<span>*</span></label>
                                            <h4 id="loginUserName"></h4>
                                        </div>
                                        <div>
                                            <label>Your Comment<span>*</span></label>
                                            <textarea id="userComment" name="content"> </textarea>
                                        </div>
                                    </form>
                                    <button class="btn btn-secondary" type="button" onclick="insert()">댓글 작성</button>

                                </div>
                                <div class="clear"></div>
                            </div>
                        </div>
                    </div>
                    <!---//End-comments-section--->
                </div>
            </div>
        </div>
        <!----start-footer--->
        <div class="footer">
            <p>Design by <a href="http://w3layouts.com/">W3layouts</a></p>
        </div>
    </div>
</div>
<!----//End-footer--->
<!---//End-wrap---->
</body>

<!--타임리프 문법은 여기서 작성-->
<script th:inline="javascript">
    // 게시글 id를 model 객체에서 가져와서 저장.
    const postId = [[${post.id}]];
    const nickname = [[${post.nickname}]];
    const username = [[${post.username}]];

    const logininfo = [[${post}]];

    //투표시 게이지와 퍼센트 반영 시작
    const opinionA = [[${post.opinionACnt}]];
    const opinionB = [[${post.opinionBCnt}]];

    const post = [[${post}]];
</script>

<!--모든 바닐라JS, jqury, ajax는 여기서 작성-->
<script src="/js/postDetail.js"></script>
</html>